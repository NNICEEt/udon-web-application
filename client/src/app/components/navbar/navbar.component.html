<nav>
  <a routerLink="" routerLinkActive="active" (click)="onSelectHomeIcon()"
    ><img [src]="imgUrl" (error)="(doSomethingOnError)" height="60"
  /></a>

  <div class="search-section">
    <div class="search-bar">
      <fa-icon class="faSearch" [icon]="faSearch"></fa-icon>
      <input type="text" placeholder="ค้นหา" />
    </div>
    <button mat-flat-button class="search-btn" color="accent">ค้นหา</button>
  </div>

  <div class="button">
    <div class="auth-button" *ngIf="!islogin">
      <button
        mat-stroked-button
        class="btn login"
        (click)="openLogin()"
        color="primary"
      >
        เข้าสู่ระบบ
      </button>
      <button
        mat-stroked-button
        class="btn signup"
        (click)="openSignup()"
        color="warn"
      >
        ลงทะเบียน
      </button>
    </div>

    <div class="auth-button" *ngIf="islogin">
      <button
        mat-flat-button
        class="btn menu"
        color="accent"
        [matMenuTriggerFor]="menu"
      >
        <fa-icon class="faBars" [icon]="faBars"></fa-icon> เมนู
      </button>
      <mat-menu #menu="matMenu">
        <button
          mat-menu-item
          routerLink="/edit-profile"
          routerLinkActive="active"
        >
          แก้ไขโปรไฟล์
        </button>
        <button mat-menu-item>ออกจากระบบ</button>
      </mat-menu>
    </div>

    <button
      mat-flat-button
      class="btn cart"
      color="primary"
      matBadge="1"
      matBadgePosition="after"
      matBadgeColor="accent"
      routerLink="/cart"
      routerLinkActive="active"
    >
      <fa-icon class="faShoppingCart" [icon]="faShoppingCart"></fa-icon>
      ตะกร้า
    </button>
  </div>
</nav>
<div class="login-dialog" *ngIf="loginDialogIsOpen">
  <div class="container">
    <img class="img" src="../../../assets/images/logo.png" alt="" width="120" />
    <form class="form" [formGroup]="LoginForm">
      <td>
        <mat-form-field name="username" appearance="fill" [style.width.px]=327>
          <mat-label>ชื่อผู้ใช้</mat-label>
          <input
            matInput
            type="text"
            minlength="5"
            [formControl]="$any(LoginForm).get('lUsername')"
            [(ngModel)]="username"
          />
          <mat-error
            *ngIf="
              logforms.lUsername.touched &&
              logforms.lUsername.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
          <mat-error
            *ngIf="
              logforms.lUsername.touched && logforms.lUsername.errors?.minlength
            "
            >{{ getUsernameLength() }}</mat-error
          >
        </mat-form-field>
      </td>
      <mat-form-field name="password" appearance="fill" [style.width.px]=327>
        <mat-label>รหัสผ่าน</mat-label>
        <input
          matInput
          type="password"
          minlength="8"
          maxlength="16"
          [formControl]="$any(LoginForm).get('lPassword')"
          [(ngModel)]="password"
        />
        <mat-error
          *ngIf="
            logforms.lPassword.touched &&
            logforms.lPassword.hasError('required')
          "
          >{{ getRequiredMessage() }}</mat-error
        >
        <mat-error
          *ngIf="
            logforms.lPassword.touched && logforms.lPassword.errors?.minlength
          "
          >{{ getLengthError() }}</mat-error
        >
        <mat-error
          *ngIf="
            logforms.lPassword.touched && logforms.lPassword.errors?.maxlength
          "
          >{{ getLengthError() }}</mat-error
        >
      </mat-form-field>
    </form>
    <mat-divider></mat-divider>
    <div class="btn-group">
      <button
        mat-flat-button
        color="primary"
        class="btn login"
        [disabled]="$any(LoginForm).touched && $any(LoginForm).invalid"
        (click)="pressLogin()"
      >
        เข้าสู่ระบบ
      </button>
      <button
        mat-flat-button
        color="warn"
        class="btn cancel"
        (click)="pressCancel()"
      >
        ยกเลิก
      </button>
    </div>
  </div>
</div>
<div class="signup-dialog" *ngIf="signupDialogIsOpen">
  <div class="container">
    <img class="img" src="../../../assets/images/logo.png" alt="" width="120" />
    <form class="form" [formGroup]="RegisForm">
      <tr>
        <mat-form-field class="username" appearance="fill" [style.width.px]=327>
          <mat-label>ชื่อผู้ใช้</mat-label>
          <input
            matInput
            minlength="5"
            [formControl]="$any(RegisForm).get('formUsername')"
            [(ngModel)]="username"
            required
          />
          <mat-error
            *ngIf="
              regforms.formUsername.touched &&
              regforms.formUsername.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
          <mat-error
            *ngIf="
              regforms.formUsername.touched &&
              regforms.formUsername.errors?.minlength
            "
            >{{ getUsernameLength() }}</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="password" appearance="fill" [style.width.px]=327>
          <mat-label>รหัสผ่าน</mat-label>
          <input
            matInput
            minlength="8"
            maxlength="16"
            type="password"
            [formControl]="$any(RegisForm).get('formPassword')"
            required
          />
          <mat-error
            *ngIf="
              regforms.formPassword.touched &&
              regforms.formPassword.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
          <mat-error
            *ngIf="
              regforms.formPassword.touched &&
              regforms.formPassword.errors?.minlength
            "
            >{{ getLengthError() }}</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="confirm-password" appearance="fill" [style.width.px]=327>
          <mat-label>ยืนยันรหัสผ่าน</mat-label>
          <input
            matInput
            minlength="8"
            maxlength="16"
            type="password"
            [formControl]="$any(RegisForm).get('formConfirm')"
            required
          />
          <mat-error
            *ngIf="
              regforms.formConfirm.touched &&
              regforms.formConfirm.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
          <mat-error
            *ngIf="
              regforms.formConfirm.touched &&
              regforms.formConfirm.hasError('passwordMismatch')
            "
            >รหัสผ่านไม่ตรงกัน</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="fName" appearance="fill" [style.width.px]=327>
          <mat-label>ชื่อจริง</mat-label>
          <input
            matInput
            type="text"
            [formControl]="$any(RegisForm).get('formfName')"
            [(ngModel)]="fName"
            required
          />
          <mat-error
            *ngIf="
              regforms.formfName.touched &&
              regforms.formfName.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="lName" appearance="fill" [style.width.px]=327>
          <mat-label>นามสกุล</mat-label>
          <input
            matInput
            type="text"
            [formControl]="$any(RegisForm).get('formlName')"
            [(ngModel)]="lName"
            required
          />
          <mat-error
            *ngIf="
              regforms.formlName.touched &&
              regforms.formlName.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="datebirth" appearance="fill" [style.width.px]=327>
          <mat-label>ปีเกิด/เดือน/วัน</mat-label>
          <input
            matInput
            mask="0000-00-00"
            type="text"
            [formControl]="$any(RegisForm).get('formDateBirth')"
            placeholder="yyyy-MM-dd"
            maxlength="10"
            [(ngModel)]="datebirth"
            required
          />
          <mat-error
            *ngIf="
              regforms.formDateBirth.touched &&
              regforms.formDateBirth.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="email" appearance="fill" [style.width.px]=327>
          <mat-label>อีเมลล์</mat-label>
          <input
            matInput
            type="text"
            [formControl]="$any(RegisForm).get('formEmail')"
            [(ngModel)]="email"
            required
          />
          <mat-error
            *ngIf="
              regforms.formEmail.touched &&
              regforms.formEmail.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
          <mat-error
            *ngIf="
              regforms.formEmail.touched && regforms.formEmail.hasError('email')
            "
            >รูปแบบของอีเมลล์ไม่ถูกต้อง</mat-error
          >
        </mat-form-field>
      </tr>
      <tr>
        <mat-form-field name="phoneno" appearance="fill" [style.width.px]=327>
          <mat-label>เบอร์โทร</mat-label>
          <input
            matInput
            mask="000-000-0000"
            type="tel"
            maxlength="13"
            [formControl]="$any(RegisForm).get('formPhone')"
            [(ngModel)]="phoneno"
            placeholder="09x-xxx-xxxx"
            required
          />
          <mat-error
            *ngIf="
              regforms.formPhone.touched &&
              regforms.formPhone.hasError('required')
            "
            >{{ getRequiredMessage() }}</mat-error
          >
        </mat-form-field>
      </tr>
    </form>
    <span>* กรุณากรอกข้อมูลที่จำเป็น</span>
    <mat-divider></mat-divider>
    <div class="btn-group">
      <button
        mat-flat-button
        color="primary"
        class="btn login"
        [disabled]="$any(regforms).formConfirm.hasError('passwordMismatch')"
        (click)="pressLogin()"
      >
        ลงทะเบียน
      </button>
      <button
        mat-flat-button
        color="warn"
        class="btn cancel"
        (click)="pressCancel()"
      >
        ยกเลิก
      </button>
    </div>
  </div>
</div>
